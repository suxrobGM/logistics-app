<p-card class="h-full">
  <ng-template #header>
    <div class="flex items-center gap-2 py-3 pl-4">
      <i class="pi pi-exclamation-circle text-xl text-warning"></i>
      <h4 class="mb-0">Needs Attention</h4>
    </div>
    <p-divider class="m-0" />
  </ng-template>

  @if (isLoading()) {
    <div class="flex flex-col gap-3">
      <p-skeleton height="3rem" />
      <p-skeleton height="3rem" />
    </div>
  } @else {
    <div class="flex flex-col gap-3">
      <!-- Unassigned Loads -->
      <a
        [routerLink]="['/loads']"
        [queryParams]="{ status: 'draft', unassigned: true }"
        class="attention-item flex items-center justify-between rounded-lg bg-slate-50 p-3 transition-colors hover:bg-slate-100 dark:bg-slate-800/50 dark:hover:bg-slate-700/50"
      >
        <div class="flex items-center gap-3">
          <div class="flex h-10 w-10 items-center justify-center rounded-full bg-orange-100 dark:bg-orange-900/40">
            <i class="pi pi-box text-orange-500"></i>
          </div>
          <div>
            <div class="font-medium">Unassigned Loads</div>
            <div class="text-sm text-muted">Loads without a truck</div>
          </div>
        </div>
        <p-badge [value]="unassignedLoadsCount().toString()" [severity]="unassignedLoadsCount() > 0 ? 'warn' : 'secondary'" />
      </a>

      <!-- Idle Trucks -->
      <a
        [routerLink]="['/trucks']"
        [queryParams]="{ status: 'idle' }"
        class="attention-item flex items-center justify-between rounded-lg bg-slate-50 p-3 transition-colors hover:bg-slate-100 dark:bg-slate-800/50 dark:hover:bg-slate-700/50"
      >
        <div class="flex items-center gap-3">
          <div class="flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900/40">
            <i class="pi pi-truck text-blue-500"></i>
          </div>
          <div>
            <div class="font-medium">Idle Trucks</div>
            <div class="text-sm text-muted">Trucks without active loads</div>
          </div>
        </div>
        <p-badge [value]="idleTrucksCount().toString()" [severity]="idleTrucksCount() > 5 ? 'warn' : 'secondary'" />
      </a>
    </div>
  }
</p-card>
