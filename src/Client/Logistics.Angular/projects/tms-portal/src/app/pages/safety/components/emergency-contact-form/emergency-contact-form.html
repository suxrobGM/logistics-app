<div class="flex flex-col gap-6">
  @if (isLoading()) {
    <div class="flex justify-center py-8">
      <p-progress-spinner />
    </div>
  }

  <form [formGroup]="form" (ngSubmit)="submit()">
    <ui-validation-summary [form]="form" />

    <ui-labeled-field label="Contact Name" for="name" [required]="true">
      <input pInputText id="name" formControlName="name" class="w-full" placeholder="John Smith" />
    </ui-labeled-field>

    <div class="mt-4 grid grid-cols-1 gap-4 md:grid-cols-2">
      <ui-labeled-field label="Contact Type" for="contactType" [required]="true">
        <p-select
          formControlName="contactType"
          id="contactType"
          class="w-full"
          [options]="contactTypeOptions"
          optionLabel="label"
          optionValue="value"
          placeholder="Select contact type"
        />
      </ui-labeled-field>

      <ui-labeled-field label="Priority" for="priority" [required]="true" hint="1 = highest priority">
        <p-inputnumber
          formControlName="priority"
          id="priority"
          class="w-full"
          [min]="1"
          [max]="10"
          [showButtons]="true"
        />
      </ui-labeled-field>
    </div>

    <div class="mt-4 grid grid-cols-1 gap-4 md:grid-cols-2">
      <ui-labeled-field label="Phone Number" for="phoneNumber" [required]="true">
        <ui-phone-input formControlName="phoneNumber" />
      </ui-labeled-field>

      <ui-labeled-field label="Email" for="email">
        <input
          pInputText
          id="email"
          formControlName="email"
          type="email"
          class="w-full"
          placeholder="email@example.com"
        />
      </ui-labeled-field>
    </div>

    @if (mode() === "edit") {
      <ui-labeled-field label="Active" class="mt-4">
        <p-toggleswitch formControlName="isActive" />
      </ui-labeled-field>
    }

    <div class="mt-6 flex gap-2">
      <p-button type="submit" icon="pi pi-check" label="Save" [disabled]="isLoading()" />

      @if (mode() === "edit") {
        <p-button
          type="button"
          icon="pi pi-trash"
          label="Delete"
          severity="danger"
          [disabled]="isLoading()"
          (click)="askRemove()"
        />
      }

      <p-button
        type="button"
        icon="pi pi-arrow-left"
        label="Back to list"
        [outlined]="true"
        [routerLink]="['/safety/emergency']"
      />
    </div>
  </form>
</div>
