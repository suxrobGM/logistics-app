<p-dialog
  header="Edit Customer"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '600px' }"
  [closable]="true"
  [draggable]="false"
>
  <form [formGroup]="form" (ngSubmit)="save()">
    <ui-labeled-field label="Name" for="name" [required]="true">
      <input
        pInputText
        formControlName="name"
        id="name"
        class="w-full"
        placeholder="Customer name"
      />
    </ui-labeled-field>

    <div class="mt-4 grid grid-cols-2 gap-4">
      <ui-labeled-field label="Email" for="email">
        <input
          pInputText
          formControlName="email"
          id="email"
          type="email"
          class="w-full"
          placeholder="email@example.com"
        />
      </ui-labeled-field>

      <ui-labeled-field label="Phone" for="phone">
        <input
          pInputText
          formControlName="phone"
          id="phone"
          type="tel"
          class="w-full"
          placeholder="(555) 555-5555"
        />
      </ui-labeled-field>
    </div>

    <ui-labeled-field label="Status" for="status" class="mt-4">
      <p-select
        formControlName="status"
        id="status"
        class="w-full"
        [options]="statusOptions"
        optionLabel="label"
        optionValue="value"
      />
    </ui-labeled-field>

    <ui-labeled-field label="Address" class="mt-4">
      <ui-address-form formControlName="address" />
    </ui-labeled-field>

    <ui-labeled-field label="Notes" for="notes" class="mt-4">
      <textarea
        pInputTextarea
        formControlName="notes"
        id="notes"
        class="w-full"
        rows="3"
        placeholder="Additional notes about this customer..."
      ></textarea>
    </ui-labeled-field>

    <ui-validation-summary [form]="form" class="mt-4" />

    <div class="mt-6 flex justify-end gap-2">
      <p-button type="button" label="Cancel" [outlined]="true" (click)="close()" />
      <p-button
        type="submit"
        label="Save Changes"
        icon="pi pi-check"
        [loading]="isLoading()"
        [disabled]="!form.valid"
      />
    </div>
  </form>

  <p-accordion class="mt-6">
    <p-accordion-panel value="danger">
      <ng-template #header>
        <span class="text-danger">Danger Zone</span>
      </ng-template>
      <ng-template #content>
        <p class="text-muted mb-4">
          Deleting a customer will remove all associated data. This action cannot be undone.
        </p>
        <p-button
          label="Delete Customer"
          icon="pi pi-trash"
          severity="danger"
          (click)="deleted.emit()"
        />
      </ng-template>
    </p-accordion-panel>
  </p-accordion>
</p-dialog>
