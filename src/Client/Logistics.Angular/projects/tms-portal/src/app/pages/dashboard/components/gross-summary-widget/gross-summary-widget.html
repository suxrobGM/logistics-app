<p-card class="h-full">
  <ng-template #header>
    <div class="flex items-center gap-2 py-3 pl-4">
      <i class="pi pi-dollar text-xl text-cyan-600"></i>
      <h4 class="mb-0">Revenue Summary</h4>
    </div>
    <p-divider class="m-0" />
  </ng-template>

  @if (isLoading()) {
    <div class="flex flex-col gap-4">
      <p-skeleton height="3rem" />
      <p-skeleton height="3rem" />
      <p-skeleton height="3rem" />
      <p-skeleton height="3rem" />
      <p-skeleton height="3rem" />
      <p-skeleton height="3rem" />
      <p-skeleton height="3rem" />
    </div>
  } @else {
    <div class="flex flex-col gap-4">
      <!-- This Week -->
      <div class="flex items-center justify-between">
        <div>
          <div class="text-xs font-medium uppercase tracking-wide text-muted">This Week</div>
          <div class="mt-1 font-mono text-xl font-bold text-primary">
            {{ thisWeekGross() | currency }}
          </div>
        </div>
        @if (weekOverWeekChange(); as change) {
          <div
            class="flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium"
            [class]="change.isPositive ? 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300' : 'bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300'"
          >
            <i class="pi" [class]="change.isPositive ? 'pi-arrow-up' : 'pi-arrow-down'"></i>
            {{ change.formatted }}
          </div>
        }
      </div>

      <!-- Last Week -->
      <div class="flex items-center justify-between rounded-lg bg-slate-50 p-3 dark:bg-slate-800/50">
        <div class="text-sm text-muted">Last Week</div>
        <div class="font-mono font-semibold text-primary">{{ lastWeekGross() | currency }}</div>
      </div>

      <!-- This Month -->
      <div class="flex items-center justify-between">
        <div>
          <div class="text-xs font-medium uppercase tracking-wide text-muted">This Month</div>
          <div class="mt-1 font-mono text-xl font-bold text-primary">
            {{ thisMonthGross() | currency }}
          </div>
        </div>
        @if (monthOverMonthChange(); as change) {
          <div
            class="flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium"
            [class]="change.isPositive ? 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300' : 'bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300'"
          >
            <i class="pi" [class]="change.isPositive ? 'pi-arrow-up' : 'pi-arrow-down'"></i>
            {{ change.formatted }}
          </div>
        }
      </div>

      <!-- Last Month -->
      <div class="flex items-center justify-between rounded-lg bg-slate-50 p-3 dark:bg-slate-800/50">
        <div class="text-sm text-muted">Last Month</div>
        <div class="font-mono font-semibold text-primary">{{ lastMonthGross() | currency }}</div>
      </div>

      <!-- Last 3 Months -->
      <div class="flex items-center justify-between">
        <div>
          <div class="text-xs font-medium uppercase tracking-wide text-muted">Last 3 Months</div>
          <div class="mt-1 font-mono text-lg font-semibold text-primary">
            {{ lastThreeMonthsGross() | currency }}
          </div>
        </div>
      </div>

      <!-- Last Year -->
      <div class="flex items-center justify-between rounded-lg bg-slate-50 p-3 dark:bg-slate-800/50">
        <div class="text-sm text-muted">Last 12 Months</div>
        <div class="font-mono font-semibold text-primary">{{ lastYearGross() | currency }}</div>
      </div>

      <!-- Total / YTD -->
      <div class="mt-2 border-t border-subtle pt-4">
        <div class="flex items-center justify-between">
          <div class="text-sm font-medium text-muted">All Time Total</div>
          <div class="font-mono text-lg font-bold text-emerald-600">{{ totalGross() | currency }}</div>
        </div>
      </div>
    </div>
  }
</p-card>
