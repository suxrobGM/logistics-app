<p-dialog
  header="Send Invoice"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '450px' }"
  (onShow)="onShow()"
  (onHide)="close()"
>
  <p class="text-muted-color mb-4">Send this invoice to the customer via email.</p>

  <form [formGroup]="form" (ngSubmit)="send()">
    <ui-labeled-field label="Email Address" for="email" [required]="true" [control]="form.controls.email">
      <input
        pInputText
        id="email"
        formControlName="email"
        type="email"
        placeholder="customer@example.com"
        class="w-full"
      />
    </ui-labeled-field>

    <ui-labeled-field label="Personal Message" for="personalMessage">
      <textarea
        pTextarea
        id="personalMessage"
        formControlName="personalMessage"
        rows="3"
        placeholder="Add an optional message to include in the email..."
        class="w-full"
      ></textarea>
    </ui-labeled-field>

    <div class="flex justify-end gap-2">
      <p-button type="button" label="Cancel" [outlined]="true" (click)="close()" />
      <p-button
        type="submit"
        icon="pi pi-send"
        label="Send Invoice"
        [loading]="isSending()"
        [disabled]="form.invalid"
      />
    </div>
  </form>
</p-dialog>
