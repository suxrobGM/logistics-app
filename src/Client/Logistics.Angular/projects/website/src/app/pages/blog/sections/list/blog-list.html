<web-section-container sectionId="blog-list" background="light">
  <div webScrollAnimate="fade-up">
    <web-section-header label="Latest Articles" title="From Our Blog" />
  </div>

  <!-- Category Filter -->
  <div class="mt-12">
    <web-filter-tabs
      [options]="store.categories()"
      [selected]="store.selectedCategory()"
      (selectionChange)="selectCategory($event)"
    />
  </div>

  <!-- Loading State -->
  @if (store.isLoading()) {
    <div class="mt-12 grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
      @for (i of [1, 2, 3, 4, 5, 6]; track i) {
        <div class="overflow-hidden rounded-2xl bg-white shadow-sm">
          <p-skeleton height="12rem" styleClass="w-full" />
          <div class="p-6">
            <p-skeleton width="4rem" height="1.5rem" styleClass="rounded-full" />
            <p-skeleton height="1.5rem" styleClass="mt-3" />
            <p-skeleton height="3rem" styleClass="mt-2" />
            <div class="mt-4 flex items-center gap-3">
              <p-skeleton shape="circle" size="2.5rem" />
              <div>
                <p-skeleton width="6rem" height="1rem" />
                <p-skeleton width="8rem" height="1rem" styleClass="mt-1" />
              </div>
            </div>
          </div>
        </div>
      }
    </div>
  } @else if (store.error()) {
    <!-- Error State -->
    <div class="mt-12 py-12 text-center text-gray-500">
      <i class="pi pi-exclamation-triangle text-4xl text-amber-500"></i>
      <p class="mt-4">{{ store.error() }}</p>
    </div>
  } @else {
    <!-- Blog Grid -->
    <div class="mt-12 grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
      @for (post of store.filteredPosts(); track post.id; let i = $index) {
        <a
          [routerLink]="['/blog', post.slug]"
          class="group block cursor-pointer overflow-hidden rounded-2xl bg-white shadow-sm transition-all hover:shadow-lg"
          webScrollAnimate="fade-up"
          [delay]="150 + i * 50"
        >
          <!-- Image -->
          <div
            class="h-48 bg-linear-to-br from-slate-100 to-slate-200 transition-transform group-hover:scale-105"
          >
            @if (post.featuredImage) {
              <img
                [src]="post.featuredImage"
                [alt]="post.title"
                class="h-full w-full object-cover"
              />
            } @else {
              <div class="flex h-full items-center justify-center">
                <i class="pi pi-image text-4xl text-slate-300"></i>
              </div>
            }
          </div>

          <!-- Content -->
          <div class="p-6">
            <!-- Category Badge -->
            @if (post.category) {
              <span
                class="inline-flex rounded-full px-3 py-1 text-xs font-medium"
                [class]="getCategoryColor(post.category)"
              >
                {{ post.category }}
              </span>
            }

            <!-- Title -->
            <h3 class="mt-3 text-lg font-bold text-gray-900 group-hover:text-blue-600">
              {{ post.title }}
            </h3>

            <!-- Excerpt -->
            <p class="mt-2 line-clamp-2 text-sm text-gray-600">
              {{ post.excerpt }}
            </p>

            <!-- Meta -->
            <div class="mt-4 flex items-center gap-3">
              <!-- Author Avatar -->
              <web-avatar [initials]="post.authorInitials ?? ''" size="sm" />
              <div class="text-sm">
                <p class="font-medium text-gray-900">{{ post.authorName }}</p>
                <p class="text-gray-500">
                  {{ post.publishedAt | date: "MMMM d, yyyy" }} Â· {{ getReadTime(post.content) }}
                </p>
              </div>
            </div>
          </div>
        </a>
      } @empty {
        <div class="col-span-full py-12 text-center text-gray-500">
          <i class="pi pi-inbox text-4xl"></i>
          <p class="mt-4">No articles in this category yet.</p>
        </div>
      }
    </div>
  }
</web-section-container>
